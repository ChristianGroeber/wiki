(()=>{"use strict";var n={7273:(n,t,e)=>{var r=e(9963),a=e(6252),o=e(3577),u={class:"header"};function i(n,t,e,r,i,s){var c=(0,a.up)("Loading"),d=(0,a.up)("Nav"),l=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)("div",null,[n.isLoading?((0,a.wg)(),(0,a.j4)(c,{key:0})):(0,a.kq)("",!0),(0,a._)("div",u,[(0,a._)("h1",null,(0,o.zw)(n.pageTitle),1)]),(0,a.Wm)(d),(0,a.Wm)(l)])}e(1539),e(8674);var s=function(n){return(0,a.dD)("data-v-50db5c82"),n=n(),(0,a.Cn)(),n},c={class:"loader"},d=s((function(){return(0,a._)("div",{class:"loading-wrapper"},[(0,a._)("div",{class:"lds-ellipsis"},[(0,a._)("div"),(0,a._)("div"),(0,a._)("div"),(0,a._)("div")])],-1)})),l=[d];function p(n,t,e,r,o,u){return(0,a.wg)(),(0,a.iD)("div",c,l)}const m=(0,a.aZ)({name:"Loading"});var f=e(3744);const h=(0,f.Z)(m,[["render",p],["__scopeId","data-v-50db5c82"]]),w=h;var v=e(9669),g=e.n(v),y=e(8692),b=(0,y.Q_)("main",{state:function(){return{isLoading:!1,pageTitle:"2022"}},getters:{loading:function(n){return n.isLoading},pageTitle:function(n){return n.pageTitle}},actions:{setIsLoading:function(n){this.$state.isLoading=n},setTitle:function(n){document.title="2022"===n?"2022":n+" Â· 2022",this.$state.pageTitle=n},buildCache:function(n){g().post("/api/admin/build-cache?token="+n)}}});e(9600),e(1249),e(7941);function k(n){return Object.keys(n).map((function(t){return t+"="+n[t]})).join("&")}var _=(0,y.Q_)("authStore",{state:function(){return{token:null}},getters:{token:function(n){return n.token}},actions:{changePassword:function(n){var t=this;return g()({method:"POST",url:"/api/auth/change-password",data:k(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(n){t.$state.token=n.data.token}))},requestNewPassword:function(n){return g()({method:"POST",url:"/api/auth/request-new-password",data:k({username:n}),headers:{"Content-Type":"application/x-www-form-urlencoded"}})},restorePassword:function(n,t,e,r){var a=this;if(null===r)throw new Error("invalid token");return g()({method:"POST",url:"/api/auth/restore-password",data:k({username:n,password1:t,password2:e,token:r}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(n){a.$state.token=n.data.token}))},generateNewToken:function(n,t){var e=this;if(null===t)throw new Error("invalid token");return g()({method:"POST",url:"/api/auth/generate-new-token",data:k({username:n,token:t}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(n){e.$state.token=n.data.token}))},login:function(n,t){var e=this;return g()({method:"POST",url:"/api/login",data:k({username:n,password:t}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(n){e.$state.token=n.data.token}))},getToken:function(){var n=localStorage.getItem("token");n&&(this.$state.token=n)},logout:function(){this.$state.token=null,localStorage.removeItem("token")},createAdmin:function(n,t){return g()({method:"POST",url:"/api/auth/create-admin",data:k({username:n,password:t}),headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}}),P=e(2201);function E(n,t,e,r,o,u){var i=(0,a.up)("NavElement"),s=(0,a.Q2)("key");return(0,a.wg)(),(0,a.iD)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.nav,(function(n,t){return(0,a.wy)(((0,a.wg)(),(0,a.j4)(i,{key:t,el:n},null,8,["el"])),[[s,t]])})),128))])}var T=(0,y.Q_)("wikiStore",{state:function(){return{loadedEntries:[],currentEntry:null,nav:[]}},getters:{loadedEntries:function(n){return n.loadedEntries},currentEntry:function(n){return n.currentEntry}},actions:{updateEntry:function(n){this.$state.currentEntry=n},saveEntry:function(n){if(null===this.$state.currentEntry)throw new Error("Not editing any entry");if(null===n)throw new Error("token cannot be null");var t={token:n,content:this.$state.currentEntry.raw_content,entry:this.$state.currentEntry.id};return g()({method:"POST",url:"/api/admin/entry/edit",data:k(t),headers:{"Content-Type":"application/x-www-form-urlencoded"}})},fetchEntry:function(n){var t=this;return g().get("/api/entry/view?entry="+n).then((function(n){t.$state.currentEntry=n.data,t.$state.loadedEntries.push(n.data)}))},getEntry:function(n){},deleteEntry:function(n,t){if(null===t)throw new Error("invalid token");return g()["delete"]("/api/admin/entry/delete?"+k({entry:n,token:t}))},renameEntry:function(n,t,e){return g().post("/api/admin/entry/rename?"+k({oldName:n,newName:t,token:e}))},loadNav:function(){var n=this;return g().get("/api/nav").then((function(t){console.log(t.data),n.$state.nav=t.data}))}}});function Z(n,t,e,r,o,u){return(0,a.wg)(),(0,a.iD)("div")}var S=void 0;const U=(0,a.aZ)({name:"NavElement",props:["el"],created:function(){void 0!=S&&console.log(S.el)}}),x=(0,f.Z)(U,[["render",Z]]),C=x;const D=(0,a.aZ)({name:"Nav",components:{NavElement:C},created:function(){T().loadNav()},computed:{nav:function(){return T().nav}}}),O=(0,f.Z)(D,[["render",E]]),L=O,N=(0,a.aZ)({name:"App",components:{Loading:w,Nav:L},data:function(){return{mainStore:b()}},computed:{isLoading:function(){return!1},pageTitle:function(){return this.mainStore.pageTitle}},created:function(){var n=this;_().getToken(),this.axios.interceptors.request.use((function(t){return n.mainStore.setIsLoading(!0),t}),(function(t){return n.mainStore.setIsLoading(!1),Promise.reject(t)})),this.axios.interceptors.response.use((function(t){return n.mainStore.setIsLoading(!0),t}),(function(t){return n.mainStore.setIsLoading(!1),Promise.reject(t)})),g().get("/api/auth/admin-created").then((function(n){var t=n.data.adminCreated;t||(0,P.tv)().push("/auth/create-admin")}))}}),W=(0,f.Z)(N,[["render",i]]),j=W;var $={class:"article"},R={class:"article-head"},q={key:0},M={class:"btn btn-icon btn-rounded"},I={class:"dropdown"},V=["href"],A={class:"article-body"},H=["innerHTML"];function B(n,t,e,r,u,i){var s=(0,a.up)("fa");return(0,a.wg)(),(0,a.iD)("div",$,[(0,a._)("div",R,[(0,a._)("h3",null,(0,o.zw)(n.title),1),n.canEdit?((0,a.wg)(),(0,a.iD)("div",q,[(0,a._)("button",M,[(0,a.Wm)(s,{icon:"ellipsis-v"})]),(0,a._)("div",I,[(0,a._)("a",{class:"dropdown-item",onClick:t[0]||(t[0]=function(){return n.deleteEntry&&n.deleteEntry.apply(n,arguments)}),title:"Delete"},"Delete"),(0,a._)("a",{class:"dropdown-item",href:"/edit?"+n.query,title:"Edit"},"Edit",8,V)])])):(0,a.kq)("",!0)]),(0,a._)("div",A,[(0,a._)("p",{innerHTML:n.content},null,8,H)])])}function Q(n,t,e,r,u,i){return(0,a.wg)(),(0,a.iD)("i",{class:(0,o.C_)("fa fa-fw fa-".concat(n.icon))},null,2)}const G=(0,a.aZ)({name:"fa",props:{icon:""}}),K=(0,f.Z)(G,[["render",Q]]),z=K,F=(0,a.aZ)({name:"WikiEntry",data:function(){return{entry:(0,P.yj)().path}},components:{fa:z},computed:{title:function(){return this.entry.meta.title},content:function(){return this.entry.content},canEdit:function(){return null!==_().token},query:function(){var n={entry:this.entry.id};return k(n)}},methods:{deleteEntry:function(){var n=confirm("Are you sure you want to delete this entry");n&&T().deleteEntry(this.entry.id,_().token)}}}),Y=(0,f.Z)(F,[["render",B]]),J=Y;var X={class:"main-content"},nn={class:"uk-fieldset"},tn={class:"form-row"},en={class:"form-row"};function rn(n,t,e,o,u,i){return(0,a.wg)(),(0,a.iD)("div",X,[(0,a._)("div",null,[(0,a._)("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=function(){return n.auth&&n.auth.apply(n,arguments)})},"Return")]),(0,a._)("form",{onSubmit:t[6]||(t[6]=(0,r.iM)((function(){return n.login&&n.login.apply(n,arguments)}),["prevent"]))},[(0,a._)("fieldset",nn,[(0,a._)("div",tn,[(0,a.wy)((0,a._)("input",{class:"uk-input",onKeyup:t[1]||(t[1]=(0,r.D2)((function(){return n.login&&n.login.apply(n,arguments)}),["enter"])),"onUpdate:modelValue":t[2]||(t[2]=function(t){return n.username=t}),placeholder:"username"},null,544),[[r.nr,n.username]])]),(0,a._)("div",en,[(0,a.wy)((0,a._)("input",{class:"uk-input",onKeyup:t[3]||(t[3]=(0,r.D2)((function(){return n.login&&n.login.apply(n,arguments)}),["enter"])),"onUpdate:modelValue":t[4]||(t[4]=function(t){return n.password=t}),placeholder:"password",type:"password"},null,544),[[r.nr,n.password]])])]),(0,a._)("button",{class:"btn btn-primary",onClick:t[5]||(t[5]=function(){return n.login&&n.login.apply(n,arguments)})},"Login")],32)])}const an=(0,a.aZ)({data:function(){return{username:"",password:"",router:(0,P.tv)()}},created:function(){b().setTitle("Login")},methods:{login:function(){var n=this;_().login(this.username,this.password).then((function(){n.router.push("/")}))},auth:function(){this.router.push("/auth")}}}),on=(0,f.Z)(an,[["render",rn]]),un=on;function sn(n,t,e,r,o,u){return(0,a.wg)(),(0,a.iD)("div",null," Redirecting... ")}const cn=(0,a.aZ)({created:function(){var n=_().token;null===n?(0,P.tv)().push("/auth/login"):(0,P.tv)().push("/")}}),dn=(0,f.Z)(cn,[["render",sn]]),ln=dn;var pn={class:"main-content"},mn=(0,a.Uk)("Return"),fn={class:"form-row"},hn={class:"form-row"},wn={class:"form-row"},vn=(0,a._)("button",{class:"mt-1",type:"submit"},"Submit",-1);function gn(n,t,e,o,u,i){var s=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",pn,[(0,a._)("div",null,[(0,a.Wm)(s,{class:"btn",to:"/auth"},{default:(0,a.w5)((function(){return[mn]})),_:1})]),(0,a._)("form",{onSubmit:t[3]||(t[3]=(0,r.iM)((function(){return n.submit&&n.submit.apply(n,arguments)}),["prevent"]))},[(0,a._)("div",fn,[(0,a.wy)((0,a._)("input",{placeholder:"Username","onUpdate:modelValue":t[0]||(t[0]=function(t){return n.username=t}),type:"text"},null,512),[[r.nr,n.username]])]),(0,a._)("div",hn,[(0,a.wy)((0,a._)("input",{placeholder:"New Password","onUpdate:modelValue":t[1]||(t[1]=function(t){return n.password1=t}),type:"password"},null,512),[[r.nr,n.password1]])]),(0,a._)("div",wn,[(0,a.wy)((0,a._)("input",{placeholder:"Repeat New Password","onUpdate:modelValue":t[2]||(t[2]=function(t){return n.password2=t}),type:"password"},null,512),[[r.nr,n.password2]])]),vn],32)])}e(4916),e(4765),e(6992),e(8783),e(3948),e(1637);const yn=(0,a.aZ)({data:function(){return{username:"",password1:"",password2:""}},created:function(){b().setTitle("Restore Password - Wiki")},methods:{submit:function(){var n=window.location.search,t=new URLSearchParams(n);_().restorePassword(this.username,this.password1,this.password2,t.get("token")).then((function(){(0,P.tv)().push("/")}))}}}),bn=(0,f.Z)(yn,[["render",gn]]),kn=bn;var _n=function(n){return(0,a.dD)("data-v-7fa12e31"),n=n(),(0,a.Cn)(),n},Pn={class:"main-content"},En=(0,a.Uk)("Return"),Tn=_n((function(){return(0,a._)("br",null,null,-1)})),Zn=_n((function(){return(0,a._)("button",{class:"mt-1",type:"submit"},"Submit",-1)}));function Sn(n,t,e,o,u,i){var s=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",Pn,[(0,a._)("div",null,[(0,a.Wm)(s,{class:"btn",to:"/auth"},{default:(0,a.w5)((function(){return[En]})),_:1})]),(0,a._)("form",{onSubmit:t[1]||(t[1]=(0,r.iM)((function(){return n.submit&&n.submit.apply(n,arguments)}),["prevent"]))},[(0,a._)("div",null,[(0,a.wy)((0,a._)("input",{placeholder:"Username","onUpdate:modelValue":t[0]||(t[0]=function(t){return n.username=t}),id:"username",type:"text"},null,512),[[r.nr,n.username]]),Tn]),Zn],32)])}const Un=(0,a.aZ)({data:function(){return{username:""}},methods:{submit:function(){_().requestNewPassword(this.username)}}}),xn=(0,f.Z)(Un,[["render",Sn],["__scopeId","data-v-7fa12e31"]]),Cn=xn;var Dn={class:"main-content"};function On(n,t,e,r,o,u){return(0,a.wg)(),(0,a.iD)("div",Dn)}const Ln=(0,a.aZ)({data:function(){return{username:"",currentPassword:"",newPassword1:"",newPassword2:""}},methods:{submit:function(){var n=_();n.changePassword({username:this.username,currentPassword:this.currentPassword,newPassword1:this.newPassword1,newPassword2:this.newPassword2}).then((function(){var n=(0,P.tv)();n.push("/")}))}}}),Nn=(0,f.Z)(Ln,[["render",On]]),Wn=Nn;var jn=function(n){return(0,a.dD)("data-v-7752588c"),n=n(),(0,a.Cn)(),n},$n={class:"main-content"},Rn=(0,a.Uk)("Return"),qn=jn((function(){return(0,a._)("br",null,null,-1)})),Mn=jn((function(){return(0,a._)("button",{class:"mt-1",type:"submit"},"Submit",-1)}));function In(n,t,e,o,u,i){var s=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",$n,[(0,a._)("div",null,[(0,a.Wm)(s,{class:"btn",to:"/auth"},{default:(0,a.w5)((function(){return[Rn]})),_:1})]),(0,a._)("form",{onSubmit:t[1]||(t[1]=(0,r.iM)((function(){return n.submit&&n.submit.apply(n,arguments)}),["prevent"]))},[(0,a._)("div",null,[(0,a.wy)((0,a._)("input",{placeholder:"Username","onUpdate:modelValue":t[0]||(t[0]=function(t){return n.username=t}),id:"username",type:"text"},null,512),[[r.nr,n.username]]),qn]),Mn],32)])}const Vn=(0,a.aZ)({data:function(){return{username:""}},methods:{submit:function(){_().requestNewPassword(this.username)}}}),An=(0,f.Z)(Vn,[["render",In],["__scopeId","data-v-7752588c"]]),Hn=An;var Bn={class:"main-content"},Qn=(0,a.Uk)("Return"),Gn=(0,a._)("br",null,null,-1),Kn=(0,a._)("button",{class:"mt-1",type:"submit"},"Submit",-1);function zn(n,t,e,o,u,i){var s=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",Bn,[(0,a._)("div",null,[(0,a.Wm)(s,{class:"btn",to:"/auth"},{default:(0,a.w5)((function(){return[Qn]})),_:1})]),(0,a._)("form",{onSubmit:t[1]||(t[1]=(0,r.iM)((function(){return n.submit&&n.submit.apply(n,arguments)}),["prevent"]))},[(0,a._)("div",null,[(0,a.wy)((0,a._)("input",{placeholder:"Username","onUpdate:modelValue":t[0]||(t[0]=function(t){return n.username=t}),type:"text"},null,512),[[r.nr,n.username]]),Gn]),Kn],32)])}const Fn=(0,a.aZ)({data:function(){return{username:""}},methods:{submit:function(){var n=_();n.generateNewToken(this.username,n.token)}}}),Yn=(0,f.Z)(Fn,[["render",zn]]),Jn=Yn;var Xn={class:"main-content"};function nt(n,t,e,o,u,i){return(0,a.wg)(),(0,a.iD)("div",Xn,[(0,a._)("form",null,[(0,a.wy)((0,a._)("input",{class:"uk-input",type:"text","onUpdate:modelValue":t[0]||(t[0]=function(t){return n.username=t}),placeholder:"Admin Username"},null,512),[[r.nr,n.username]]),(0,a.wy)((0,a._)("input",{class:"uk-input",type:"text","onUpdate:modelValue":t[1]||(t[1]=function(t){return n.password=t}),placeholder:"Admin Password"},null,512),[[r.nr,n.password]]),(0,a._)("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=function(){return n.submit&&n.submit.apply(n,arguments)})},"Submit")])])}const tt=(0,a.aZ)({data:function(){return{username:"",password:""}},methods:{submit:function(){_().createAdmin(this.username,this.password).then((function(n){n.data.adminCreated&&(0,P.tv)().push("/auth/login")}))}}}),et=(0,f.Z)(tt,[["render",nt]]),rt=et;var at={class:"main-content"},ot={class:"d-flex gap-1"},ut=(0,a.Uk)("Home"),it=(0,a.Uk)("Login"),st=(0,a.Uk)("Restore Password"),ct=(0,a.Uk)("Change Password"),dt=(0,a.Uk)("Generate New Token"),lt=(0,a.Uk)("Request New Password");function pt(n,t,e,r,o,u){var i=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",at,[(0,a._)("div",ot,[(0,a.Wm)(i,{class:"btn btn-primary",to:"/"},{default:(0,a.w5)((function(){return[ut]})),_:1}),(0,a.Wm)(i,{class:"btn btn-primary",to:"/auth/login"},{default:(0,a.w5)((function(){return[it]})),_:1}),(0,a.Wm)(i,{class:"btn btn-primary",to:"/auth/restore-password"},{default:(0,a.w5)((function(){return[st]})),_:1}),(0,a.Wm)(i,{class:"btn btn-primary",to:"/auth/change-password"},{default:(0,a.w5)((function(){return[ct]})),_:1}),(0,a.Wm)(i,{class:"btn btn-primary",to:"/auth/generate-new-token"},{default:(0,a.w5)((function(){return[dt]})),_:1}),(0,a.Wm)(i,{class:"btn btn-primary",to:"/auth/request-new-password"},{default:(0,a.w5)((function(){return[lt]})),_:1}),(0,a._)("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=function(){return n.logout&&n.logout.apply(n,arguments)})},"Logout")])])}const mt=(0,a.aZ)({created:function(){b().setTitle("Auth")},methods:{logout:function(){_().logout(),(0,P.tv)().push("/")}}}),ft=(0,f.Z)(mt,[["render",pt]]),ht=ft;var wt={class:"main-content"},vt={class:"d-flex gap-1"};function gt(n,t,e,r,o,u){var i=(0,a.up)("fa");return(0,a.wg)(),(0,a.iD)("div",wt,[(0,a._)("div",vt,[(0,a._)("button",{class:"btn btn-icon btn-primary",onClick:t[0]||(t[0]=function(){return n.goHome&&n.goHome.apply(n,arguments)})},[(0,a.Wm)(i,{icon:"arrow-left"})]),(0,a._)("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=function(){return n.generateBackup&&n.generateBackup.apply(n,arguments)})},"Generate Backup")])])}const yt=(0,a.aZ)({components:{fa:z},methods:{generateBackup:function(){g().get("/api/admin/generate-backup?token="+_().token).then((function(n){location.href=n.data.file}))},goHome:function(){(0,P.tv)().push("/")}}}),bt=(0,f.Z)(yt,[["render",gt]]),kt=bt;var _t=[{path:"/auth",name:"Auth",component:ht},{path:"/auth/login",name:"Login",component:un},{path:"/auth/login-if-not-logged-in",name:"Login if not logged in",component:ln},{path:"/auth/register",name:"Register",component:Hn},{path:"/auth/restore-password",name:"Restore Password",component:kn},{path:"/auth/request-new-password",name:"Request New Password",component:Cn},{path:"/auth/change-password",name:"Change Password",component:Wn},{path:"/auth/generate-new-token",name:"Generate New Token",component:Jn},{path:"/auth/create-admin",name:"Create Admin User",component:rt},{path:"/admin/tools",name:"More Tools",component:kt},{path:"/:pathMatch(.*)*",name:"Home",component:J}],Pt=(0,P.p7)({history:(0,P.PO)(),routes:_t});const Et=Pt;var Tt=e(2346);(0,r.ri)(j).use(Tt.Z,g()).use((0,y.WB)()).use(Et).mount("#app")}},t={};function e(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return n[r](o,o.exports,e),o.loaded=!0,o.exports}e.m=n,(()=>{e.amdO={}})(),(()=>{var n=[];e.O=(t,r,a,o)=>{if(!r){var u=1/0;for(d=0;d<n.length;d++){for(var[r,a,o]=n[d],i=!0,s=0;s<r.length;s++)(!1&o||u>=o)&&Object.keys(e.O).every((n=>e.O[n](r[s])))?r.splice(s--,1):(i=!1,o<u&&(u=o));if(i){n.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=n.length;d>0&&n[d-1][2]>o;d--)n[d]=n[d-1];n[d]=[r,a,o]}})(),(()=>{e.n=n=>{var t=n&&n.__esModule?()=>n["default"]:()=>n;return e.d(t,{a:t}),t}})(),(()=>{e.d=(n,t)=>{for(var r in t)e.o(t,r)&&!e.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:t[r]})}})(),(()=>{e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"===typeof window)return window}}()})(),(()=>{e.hmd=n=>(n=Object.create(n),n.children||(n.children=[]),Object.defineProperty(n,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+n.id)}}),n)})(),(()=>{e.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t)})(),(()=>{var n={143:0};e.O.j=t=>0===n[t];var t=(t,r)=>{var a,o,[u,i,s]=r,c=0;if(u.some((t=>0!==n[t]))){for(a in i)e.o(i,a)&&(e.m[a]=i[a]);if(s)var d=s(e)}for(t&&t(r);c<u.length;c++)o=u[c],e.o(n,o)&&n[o]&&n[o][0](),n[o]=0;return e.O(d)},r=self["webpackChunkwiki"]=self["webpackChunkwiki"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=e.O(void 0,[998],(()=>e(7273)));r=e.O(r)})();